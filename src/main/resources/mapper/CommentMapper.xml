<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
        
<mapper namespace="com.farm404.samyang3.mapper.CommentMapper">
    
    <!-- 게시글별 댓글 목록 -->
    <select id="selectByPostId" resultType="com.farm404.samyang3.domain.CommentVO">
        SELECT * FROM Comment 
        WHERE PostID = #{postId}
        ORDER BY CommentID ASC
    </select>
    
    <!-- 사용자별 댓글 목록 -->
    <select id="selectByUserId" resultType="com.farm404.samyang3.domain.CommentVO">
        SELECT * FROM Comment 
        WHERE UserID = #{userId}
        ORDER BY CommentID DESC
    </select>
    
    <!-- 댓글 단건 조회 -->
    <select id="selectById" resultType="com.farm404.samyang3.domain.CommentVO">
        SELECT * FROM Comment 
        WHERE CommentID = #{commentId}
    </select>
    
    <!-- 댓글 작성 -->
    <insert id="insertComment" parameterType="com.farm404.samyang3.domain.CommentVO" useGeneratedKeys="true" keyProperty="commentID">
        INSERT INTO Comment (PostID, UserID, Content, AuthorName)
        VALUES (#{postID}, #{userID}, #{content}, #{authorName})
    </insert>
    
    <!-- 댓글 삭제 -->
    <delete id="deleteComment">
        DELETE FROM Comment 
        WHERE CommentID = #{commentId}
    </delete>
    
</mapper>